<app-navbar [email]="this.auth.currentUser.email"[firstName]="this.auth.currentUser.firstName" [path]="'home'"></app-navbar>

<section class="bg-white ">
    <div class="py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6 ">
       
        <div class="flex container mx-auto m-6 justify-center text-center">
            <h2 class="text-2xl md:text-4xl mr-10">Classement Des Employée Du Mois</h2>
           
        
         </div>
         <div class="flex container mx-auto justify-center text-center space-x-8">

            <div class="mb-6 ">

                <select  id="payments" [(ngModel)]="givenMonth"class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  "(change)="ngOnInit()" >
                <option *ngFor="let month of monthsList" [ngValue]="month">{{time.monthFrenchNames[month-1]}}</option>
               

                </select>
            </div>
    
            <div class="mb-6 ">
 
                <select id="payments" [(ngModel)]="givenYear"class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5  "  (change)="ngOnInit()">
                <option  *ngFor="let year of yearsList" [ngValue]="year">{{year}}</option>
              
    
                </select>
            </div>
            
            
    
        </div>
       
       
        <div class="grid gap-8 mb-6 lg:mb-16 md:grid-cols-2" >
        <div *ngFor="let em of allEmployees; let i=index">
                <h1 class="font-bold text-2xl m-3">{{i+1}}</h1>
                <div class="items-center bg-gray-50 rounded-lg shadow sm:flex" >
                    <div>
                    
                        <input type="file" [id]="'getFile'+ i" style="display:none" >
                        <!-- <svg class=" w-32 h-32 text-gray-400 -left-1" fill="currentColor" viewBox="0 0 24 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg> -->
                        <img *ngIf="em.profilePicture===undefined" class="w-full rounded-lg sm:rounded-none sm:rounded-l-lg "  src="../../../assets/img/user.png" alt="Bonnie Avatar">
                        <img *ngIf="em.profilePicture!==undefined" class="w-72 rounded-lg sm:rounded-none sm:rounded-l-lg " [src]="em.profilePicture.downloadURL" alt="Bonnie Avatar">
                        <!-- <img class="w-72 rounded-lg sm:rounded-none sm:rounded-l-lg" src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/bonnie-green.png" alt="Bonnie Avatar"> -->
                    
                    </div>
                
                    <a  class="p-5" >
                        <h3 class="text-xl font-bold tracking-tight text-gray-900 " [routerLink]="['/employee-page',em.trackingId]">
                        {{em.firstName}} {{em.middleName}} {{em.lastName}}
                        </h3>
                        <h1 class="text-gray-500   mt-2">Role: {{em.role}}</h1>
                        <p class="mt-1 mb-1 font-light text-gray-500">Status: <span class=""> {{em.status}}</span></p>

                        <p class="mt-1 mb-1 font-bold text-gray-500 ">Pourcentage Du Mois: <span class=""> {{em.performancePercentageMonth}} %</span></p>

                        <p class="mt-1 mb-1 font-light text-gray-500 ">Sex: <span class=""> {{em.sex}}</span></p>

                        <p class="mt-1 mb-1 font-light text-gray-500 ">Debut de Travaille: <span class=""> {{em.dateJoined}}</span></p>
                        <p class="mt-1 mb-3 font-light text-gray-500 ">Telephone: <span class="">{{em.phoneNumber}}</span></p>
                        <a type="submit"  target="_blank" *ngIf="em.profilePicture && em.profilePicture.CV !==undefined" href="{{em.profilePicture.CVDownloadURL}}"  class="text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-full text-sm w-auto sm:w-auto px-5 py-2.5 text-center ">CV</a>
                        
                    </a>
        
                </div>
         
        </div>
        <div class="relative min-w-md flex flex-col overflow-x-auto mb-6 shadow-xl">
            <h1 class="text-2xl  font-bold text-center mx-4 mb-4 underline"> Employée Paiements ({{time.monthFrenchNames[givenMonth-1]}} {{year}})</h1>
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 ">
                <thead class="text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                        <th scope="col" class="px-6 py-3 rounded-s-lg">
                           Nom
                        </th>
                    
                        <th scope="col" class=" px-6 py-3">
                            Salaire($)
                          </th>
                        
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let em of allEmployees; let i=index" class="bg-white dark:bg-gray-800">
                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        {{i+1}}.  {{em.firstName}} {{em.lastName}}
                        </th>
                     
                        <td class="px-6 py-4">
                            {{em.paymentAmount | number:'1.0-0'}} $
                          </td>
                        
                    </tr>
                    <h1 class="text-center text-2xl font-bold underline">Maisons Loyer</h1>
                    <tr *ngFor="let u of allUsers; let i=index" class="bg-white dark:bg-gray-800">
                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                        {{i+1}}.  {{u.firstName}} 
                        </th>
                     
                        <td class="px-6 py-4">
                            {{u.housePayment | number:'1.0-0'}} $
                          </td>
                        
                    </tr>
                    
                    
                </tbody>
                <tfoot>
                    <tr class="font-semibold ">
                        <th scope="row" class="px-6 py-3 text-xl">Total</th>
                    
                        <td class="px-6 py-3 text-xl">{{total| number:'1.0-0'}} $</td>
                    </tr>
                   
                </tfoot>
                
              
            </table>
        </div> 
      </div> 
     
    </div>
  </section>




