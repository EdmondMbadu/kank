<app-navbar
  [email]="this.auth.currentUser.email"
  [firstName]="this.auth.currentUser.firstName"
  [path]="'home'"
></app-navbar>

<!-- investements -->

<div class="container mx-auto px-4 mt-4 mb-2">
  <div
    class="relative mx-auto max-w-3xl rounded-2xl border border-slate-200 bg-white/70 backdrop-blur-md p-4 md:p-5 shadow-sm dark:border-slate-700 dark:bg-slate-900/50"
  >
    <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4">
      <div class="flex items-center gap-3 min-w-0">
        <div
          class="grid h-10 w-10 place-items-center rounded-xl bg-gradient-to-br from-emerald-400 to-teal-500 text-white text-xl"
        >
          ðŸ“ˆ
        </div>
        <h1
          class="min-w-0 bg-gradient-to-r from-emerald-600 via-teal-600 to-cyan-600 bg-clip-text text-transparent font-extrabold tracking-tight leading-tight text-2xl md:text-4xl break-words whitespace-normal"
        >
          Gestion Du Mois
        </h1>
      </div>

      <span
        class="sm:ml-auto inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 px-3 py-1 text-sm md:text-lg font-medium text-slate-700 dark:text-slate-200 shadow order-last sm:order-none"
      >
        <time
          >{{ time.monthFrenchNames[givenMonth - 1] }} {{ givenYear }}
        </time>
      </span>
    </div>

    <div
      class="absolute -bottom-[2px] left-6 right-6 h-[3px] rounded-full bg-gradient-to-r from-emerald-400 via-teal-500 to-cyan-400"
    ></div>
  </div>
</div>
<div class="flex container mx-auto justify-center text-center space-x-8">
  <div class="mb-6">
    <!-- <label for="payments" class="block mb-2 text-md font-medium text-gray-900 m-2">Mois: {{givenMonth}}</label> -->
    <select
      id="payments"
      [(ngModel)]="givenMonth"
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
      (change)="initalizeInputs()"
    >
      <option *ngFor="let month of monthsList" [ngValue]="month">
        {{ time.monthFrenchNames[month - 1] }}
      </option>

      <!-- <option [ngValue]="maxRange">Max</option> -->
    </select>
  </div>

  <div class="mb-6">
    <!-- <label for="payments" class="block mb-2 text-md font-medium text-gray-900 m-2">AnnÃ©e: {{givenYear}}</label> -->
    <select
      id="payments"
      [(ngModel)]="givenYear"
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
      (change)="initalizeInputs()"
    >
      <option *ngFor="let year of yearsList" [ngValue]="year">
        {{ year }}
      </option>

      <!-- <option [ngValue]="maxRange">Max</option> -->
    </select>
  </div>
</div>

<div
  class="container flex flex-wrap flex-col items-center justify-center mx-auto md:flex-row"
>
  <div class="flex-col w-60 m-6" *ngFor="let s of summary; let i = index">
    <a
      routerLink="{{ linkPaths[i] }}"
      class="block max-w-sm p-6 bg-neutral-200 border border-gray-200 rounded-lg shadow hover:bg-green-100"
    >
      <img
        src="{{ imagePaths[i] }}"
        alt=""
        class="w-20 justify-center mx-auto"
      />
      <div *ngIf="i == 0">
        <h2
          *ngIf="lossRatio <= 2"
          class="font-bold text-lg text-green-700 text-center"
        >
          {{ summaryContent[i] }} %
        </h2>
        <h2
          *ngIf="lossRatio > 2"
          class="font-bold text-lg text-red-700 text-center"
        >
          {{ summaryContent[i] }} %
        </h2>
      </div>

      <h5
        class="my-2 text-2xl text-center font-bold tracking-tight text-gray-900"
      >
        {{ s }}
      </h5>
      <h2 *ngIf="i != 0" class="font-bold text-lg text-green-700 text-center">
        FC {{ summaryContent[i] | number : "1.0-0" }}
      </h2>
      <h2 *ngIf="i != 0" class="font-bold text-lg text-yellow-900 text-center">
        $ {{ valuesConvertedToDollars[i] | number : "1.0-0" }}
      </h2>
    </a>
  </div>
</div>

<div
  class="container lg:block flex mx-auto shadow-xl flex-col md:justify-center md:flex-row"
>
  <div class="flex flex-col">
    <div class="container mx-auto px-4 mt-2 mb-6">
      <div
        class="relative mx-auto max-w-3xl rounded-2xl border border-slate-200 bg-white/70 backdrop-blur-md p-4 md:p-5 shadow-sm dark:border-slate-700 dark:bg-slate-900/50"
      >
        <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4">
          <div class="flex items-center gap-3 min-w-0">
            <div
              class="grid h-10 w-10 place-items-center rounded-xl bg-gradient-to-br from-emerald-400 to-teal-500 text-white text-xl"
            >
              ðŸ“ˆ
            </div>
            <h1
              class="min-w-0 bg-gradient-to-r text-center from-emerald-600 via-teal-600 to-cyan-600 bg-clip-text text-transparent font-extrabold tracking-tight leading-tight text-2xl md:text-4xl break-words whitespace-normal"
            >
              Reserve Total Par Mois
            </h1>
          </div>
        </div>

        <div
          class="absolute -bottom-[2px] left-6 right-6 h-[3px] rounded-full bg-gradient-to-r from-emerald-400 via-teal-500 to-cyan-400"
        ></div>
      </div>
    </div>

    <div class="inline-flex rounded-md shadow-sm mx-auto" role="group">
      <button
        (click)="updateReserveGraphics(compute.quarter1)"
        type="button"
        class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-s-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white"
      >
        3M
      </button>
      <button
        (click)="updateReserveGraphics(compute.quarter2)"
        type="button"
        class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white"
      >
        6M
      </button>
      <button
        (click)="updateReserveGraphics(compute.quarter3)"
        type="button"
        class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white"
      >
        9M
      </button>
      <button
        (click)="updateReserveGraphics(compute.quarter4)"
        type="button"
        class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white"
      >
        1A
      </button>
      <button
        (click)="updateReserveGraphics(maxRange)"
        type="button"
        class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-e-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white"
      >
        Max
      </button>
    </div>

    <plotly-plot [data]="graph.data" [layout]="graph.layout"></plotly-plot>
  </div>
</div>
